<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AdelbertusShop ‚Äî integracja</title>
  <style>
    /* Minimalne style ‚Äî wklej swoje Tailwind/pe≈Çne style nad tym lub zamiast */
    :root{--gold:#c79a2f;--bg:#f5f5f7}
    body{font-family:Inter,system-ui,Arial;background:var(--bg);margin:0;color:#111}
    header{background:#111;color:#fff;padding:1rem}
    .container{max-width:1100px;margin:0 auto;padding:1rem}
    .section-title h2{margin:0 0 .25rem 0}
    .section{margin:2rem 0}
    .grid{display:grid;gap:1rem}
    .grid-2{grid-template-columns:repeat(2,1fr)}
    .bg-white{background:#fff}
    .rounded{border-radius:8px}
    .p-4{padding:1rem}
    .nav-btn{background:#111;color:#fff;padding:.6rem .9rem;border:none;border-radius:8px;cursor:pointer}
    .gold-bg{background:var(--gold);color:#111}
    /* Projektuj */
    #design-area{display:flex;gap:1rem;flex-wrap:wrap}
    .mockup{width:360px;height:420px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.12);background:#fff;display:flex;align-items:center;justify-content:center;position:relative}
    .mockup img{max-width:80%;max-height:80%}
    .controls{flex:1;min-width:300px}
    label{display:block;margin:.5rem 0 .2rem;font-weight:600}
    input[type="file"]{display:block}
    .chat{position:fixed;right:18px;bottom:18px;width:320px;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);overflow:hidden}
    .chat-header{background:var(--gold);padding:.5rem .75rem;font-weight:700}
    .chat-body{height:320px;padding:.5rem;overflow:auto}
    .chat-input{display:flex;padding:.5rem;gap:.5rem;border-top:1px solid #eee}
    .bubble{background:#f1f1f1;padding:.5rem .75rem;border-radius:12px;margin:.4rem 0;max-width:80%}
    .bubble.bot{background:#eee}
    .bubble.me{background:var(--gold);color:#111;margin-left:auto}
    .product-card{background:#fff;border-radius:10px;padding:1rem;display:flex;gap:1rem;align-items:flex-start}
    .product-image{width:110px;height:110px;object-fit:cover;border-radius:8px}
    /* responsywno≈õƒá */
    @media(max-width:900px){.grid-2{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>AdelbertusShop ‚Äî Integracja (wersja robocza)</h1>
    </div>
  </header>

  <main class="container">
    <!-- === TU WKLEJ CA≈ÅY SW√ìJ DOTYCHCZASOWY KOD KATALOGU/PRODUKT√ìW === -->
    <!-- Je≈õli masz ju≈º swoje karty produkt√≥w, wklej je tutaj bez zmian. -->
    <!-- (Poni≈ºej przyk≈Çadowa sekcja katalogu z 1 produktem ‚Äî Twoje przyciski .add-to-cart-btn bƒôdƒÖ dzia≈Çaƒá) -->
    <section id="catalog" class="section">
      <div class="section-title">
        <h2>Katalog (przyk≈Çad)</h2>
        <p>Twoje produkty ‚Äî wklej tu ca≈Çy katalog, ja go nie nadpisujƒô.</p>
      </div>

      <div class="grid" id="catalogGrid">
        <!-- Przykladowa karta ‚Äî twoje karty bƒôdƒÖ identycznie dzia≈Çaƒá -->
        <div class="product-card">
          <img class="product-image" src="https://i.ibb.co/kVB4DdxF/file-000000007a18620aa7175173df81f11a-1.png" alt="Live With">
          <div>
            <div class="product-title">Live With</div>
            <div class="product-price">120 z≈Ç</div>
            <p>InspirujƒÖcy napis.</p>
            <button class="nav-btn add-to-cart-btn" data-name="Live With" data-price="120" data-image="https://i.ibb.co/kVB4DdxF/file-000000007a18620aa7175173df81f11a-1.png">Dodaj do koszyka</button>
          </div>
        </div>

        <!-- Je≈õli chcesz, poni≈ºej mo≈ºesz wkleiƒá ca≈ÇƒÖ d≈ÇugƒÖ listƒô kart, kt√≥re wkleja≈Çe≈õ. -->
      </div>
    </section>

    <!-- Zbi√≥rka -->
    <section id="charity" class="section bg-white rounded p-4">
      <div class="section-title">
        <h2>Wspieramy Dom Dziecka "Promyk"</h2>
        <p>Ka≈ºdy zakup to pomoc dla potrzebujƒÖcych dzieci</p>
      </div>

      <div class="charity-section">
        <h3>Do≈ÇƒÖcz do naszych darczy≈Ñc√≥w</h3>
        <p>Twoje wsparcie zmienia ≈ºycie dzieci</p>

        <div class="donors-list">
          <h4>Ostatni darczy≈Ñcy:</h4>
          <ul id="donorsList">
            <li>Anonim - 100 z≈Ç</li>
            <li>Maria K. - 50 z≈Ç</li>
            <li>Firma XYZ - 500 z≈Ç</li>
          </ul>
        </div>

        <button id="donateBtn" class="nav-btn gold-bg" style="margin-top:1.5rem">Wesprzyj zbi√≥rkƒô</button>
      </div>
    </section>

    <!-- Blog -->
    <section id="blog" class="section">
      <div class="section-title">
        <h2>Nasz Blog</h2>
        <p>Porady, trendy i inspiracje</p>
      </div>

      <div class="blog-posts grid grid-2">
        <div class="blog-post bg-white p-4 rounded">
          <img src="https://i.ibb.co/N2t3thBF/Messenger-creation-C3-B74628-A8-E4-4293-B46-D-754-D2-C97-F8-CC.jpg" alt="Moda vintage" style="width:100%;border-radius:8px">
          <div class="blog-content">
            <h3>Powr√≥t do lat 90s</h3>
            <p>Odkryj jak styl vintage powraca na ulice...</p>
            <button class="nav-btn mt-4">Czytaj wiƒôcej</button>
          </div>
        </div>

        <div class="blog-post bg-white p-4 rounded">
          <img src="https://i.ibb.co/kgrCffk4/Screenshot-20250714-002247-Files-by-Google-2.jpg" alt="Streetwear" style="width:100%;border-radius:8px">
          <div class="blog-content">
            <h3>Streetwear 2024</h3>
            <p>Najnowsze trendy w modzie ulicznej...</p>
            <button class="nav-btn mt-4">Czytaj wiƒôcej</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Regulamin -->
    <section id="regulations" class="section bg-white p-4 rounded">
      <div class="section-title">
        <h2>Regulamin Sklepu</h2>
        <p>Zasady korzystania z naszych us≈Çug</p>
      </div>

      <div>
        <h3 class="text-xl font-bold mb-4">¬ß1 Postanowienia og√≥lne</h3>
        <p>Sklep internetowy AdelbertusShop dzia≈Ça na zasadach okre≈õlonych w niniejszym regulaminie.</p>

        <h3 class="text-xl font-bold mb-4">¬ß2 Zam√≥wienia i p≈Çatno≈õci</h3>
        <p>Realizacja zam√≥wie≈Ñ odbywa siƒô w ciƒÖgu 3-7 dni roboczych.</p>
      </div>
    </section>

    <!-- Kontakt -->
    <section id="contact" class="section">
      <div class="section-title">
        <h2>Kontakt</h2>
        <p>Skontaktuj siƒô z nami</p>
      </div>

      <div class="bg-white p-4 rounded">
        <div class="grid grid-2">
          <div>
            <h3>Dane kontaktowe</h3>
            <p><strong>Email:</strong> mielniczukgrzegosz74@gmail.com</p>
            <p><strong>Tel:</strong> 604 296 360</p>
            <p><strong>Godziny:</strong> Pon-Pt: 9:00-17:00</p>

            <div class="social-links">
              <a href="https://instagram.com" target="_blank">IG</a> |
              <a href="https://facebook.com" target="_blank">FB</a> |
              <a href="https://tiktok.com" target="_blank">TT</a>
            </div>
          </div>

          <div>
            <h3>Formularz kontaktowy</h3>
            <form id="contactForm">
              <input type="text" placeholder="Imiƒô i nazwisko" class="w-full p-2 border rounded mb-2" required>
              <input type="email" placeholder="Email" class="w-full p-2 border rounded mb-2" required>
              <textarea placeholder="Wiadomo≈õƒá" rows="4" class="w-full p-2 border rounded mb-2" required></textarea>
              <button type="submit" class="nav-btn gold-bg w-full">Wy≈õlij wiadomo≈õƒá</button>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- === Sekcja PROJEKTUJ (kreator) === -->
    <section id="projektuj" class="section bg-white p-4 rounded">
      <div class="section-title">
        <h2>Projektuj ‚Äî kreator koszulki, bluzy i czapki</h2>
        <p>Stw√≥rz w≈Çasny projekt: dodaj grafikƒô, tekst, wybierz kolor i rozmiar, zobacz podglƒÖd i dodaj do koszyka.</p>
      </div>

      <div id="design-area">
        <div class="mockup" id="mockup">
          <div style="text-align:center;color:#666">
            <div style="font-weight:700">PodglƒÖd mockupu</div>
            <img id="mockupGraphic" src="" alt="" style="display:none" />
            <div id="mockupText" style="display:none;font-size:20px;font-weight:700"></div>
          </div>
        </div>

        <div class="controls">
          <label>Wybierz produkt</label>
          <select id="designProduct">
            <option value="Koszulka">Koszulka</option>
            <option value="Bluza">Bluza</option>
            <option value="Czapka">Czapka</option>
          </select>

          <label>Wgraj grafikƒô (PNG/JPG)</label>
          <input type="file" id="graphicUpload" accept="image/*">

          <label>Dodaj tekst</label>
          <input type="text" id="designText" placeholder="Tw√≥j napis">

          <label>Kolor mockupu</label>
          <select id="mockupColor">
            <option value="#ffffff">Bia≈Çy</option>
            <option value="#000000">Czarny</option>
            <option value="#800020">Bordowy</option>
            <option value="#36454F">Grafitowy</option>
          </select>

          <label>Rozmiar</label>
          <select id="designSize">
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
            <option value="XXL">XXL</option>
          </select>

          <div style="margin-top:1rem;display:flex;gap:.5rem">
            <button id="previewBtn" class="nav-btn">Poka≈º podglƒÖd</button>
            <button id="saveProjectBtn" class="nav-btn gold-bg">Dodaj projekt do koszyka</button>
          </div>

          <div style="margin-top:1rem">
            <h4>PodglƒÖd projektu</h4>
            <div id="projectPreview" class="bg-white p-2 rounded" style="min-height:80px"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Koszyk prosty -->
    <section id="cart" class="section">
      <div class="section-title">
        <h2>Koszyk</h2>
        <p>Produkty dodane lokalnie (localStorage)</p>
      </div>

      <div id="cartContents" class="bg-white p-4 rounded"></div>
      <div style="margin-top:1rem">
        <button id="checkoutBtn" class="nav-btn gold-bg">Przejd≈∫ do zam√≥wienia</button>
        <button id="clearCartBtn" class="nav-btn" style="margin-left:.5rem">Wyczy≈õƒá koszyk</button>
      </div>
    </section>

  </main>

  <!-- AdelbertusBot (chat + integracja) -->
  <div class="chat" id="adelbertusChat">
    <div class="chat-header">AdelbertusBot ‚Äî pomocnik sklepu</div>
    <div class="chat-body" id="chatBody">
      <div class="bubble bot">Cze≈õƒá ‚Äî jestem AdelbertusBot. Mogƒô pom√≥c z: Blog, Projektuj, Zbi√≥rka, Regulamin, Kontakt, koszyk. Napisz, z czym chcesz pomocy.</div>
    </div>
    <div class="chat-input">
      <input id="chatInput" placeholder="Napisz wiadomo≈õƒá..." style="flex:1;padding:.5rem;border-radius:8px;border:1px solid #ddd">
      <button id="chatSend" class="nav-btn">Wy≈õlij</button>
    </div>
  </div>

  <script>
    /* ======================
       Helpery + Local Cart
       ====================== */
    const CART_KEY = 'adelbertus_cart_v1';
    function getCart(){ try{ return JSON.parse(localStorage.getItem(CART_KEY)||'[]') }catch(e){return[]} }
    function saveCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)) }
    function addToCart(item){
      const cart = getCart();
      cart.push(item);
      saveCart(cart);
      renderCart();
      // emit event globalnie, mo≈ºna na to nas≈Çuchiwaƒá z backendu
      window.dispatchEvent(new CustomEvent('adelbertus:productAdded', { detail: item }));
    }
    function renderCart(){
      const el = document.getElementById('cartContents');
      const cart = getCart();
      if(!cart.length){ el.innerHTML = '<em>Koszyk pusty</em>'; return; }
      el.innerHTML = '';
      cart.forEach((p, idx)=>{
        const d = document.createElement('div');
        d.className = 'product-card';
        d.innerHTML = `
          <img class="product-image" src="${p.image||''}" alt="${p.name}">
          <div>
            <div style="font-weight:700">${p.name}</div>
            <div>${p.price} z≈Ç ‚Äî Rozmiar: ${p.size||'-'} ‚Äî Kolor: ${p.color||'-'}</div>
            <div style="margin-top:.5rem">
              <button class="nav-btn remove-btn" data-idx="${idx}">Usu≈Ñ</button>
            </div>
          </div>
        `;
        el.appendChild(d);
      });
      // attach remove handlers
      el.querySelectorAll('.remove-btn').forEach(b=>{
        b.addEventListener('click', e=>{
          const idx = +e.currentTarget.dataset.idx;
          const c = getCart();
          c.splice(idx,1);
          saveCart(c);
          renderCart();
        });
      });
    }

    document.getElementById('clearCartBtn').addEventListener('click', ()=>{
      localStorage.removeItem(CART_KEY);
      renderCart();
    });

    document.getElementById('checkoutBtn').addEventListener('click', ()=>{
      const cart = getCart();
      if(!cart.length){ alert('Koszyk pusty'); return; }
      // tutaj mo≈ºesz pod≈ÇƒÖczyƒá wysy≈Çkƒô do backendu - na razie generujemy prostƒÖ kopiƒô JSON
      const summary = JSON.stringify(cart, null, 2);
      console.log('ZAM√ìWIENIE:', summary);
      alert('Zam√≥wienie przygotowane. Sprawd≈∫ konsolƒô (devtools) lub zr√≥b integracjƒô z endpointem.');
    });

    /* ======================
       Pod≈ÇƒÖczenie przycisk√≥w .add-to-cart-btn (istniejƒÖce karty)
       ====================== */
    function attachExistingAddButtons(){
      document.querySelectorAll('.add-to-cart-btn').forEach(btn=>{
        btn.removeEventListener('click', onAddBtnClick);
        btn.addEventListener('click', onAddBtnClick);
      });
    }
    function onAddBtnClick(e){
      const b = e.currentTarget;
      const name = b.dataset.name || 'Produkt';
      const price = b.dataset.price || '0';
      const image = b.dataset.image || '';
      // pr√≥bujemy zebraƒá wybrane opcje z karty (je≈õli sƒÖ)
      const card = b.closest('.product-card');
      let size = null, color = null;
      if(card){
        const selectedSize = card.querySelector('.size-option.selected');
        const selectedColor = card.querySelector('.color-option.selected');
        if(selectedSize) size = selectedSize.dataset.size;
        if(selectedColor) color = selectedColor.dataset.color;
      }
      const item = { name, price: Number(price), image, size, color, id: 'p_'+Date.now() };
      addToCart(item);
      // powiadomienie szybsze
      showBotMessage('Dodano do koszyka: ' + name, true);
    }

    // attach on load and observe DOM (if you dynamically paste catalog later)
    attachExistingAddButtons();
    const observer = new MutationObserver(()=>attachExistingAddButtons());
    observer.observe(document.getElementById('catalog') || document.body, { childList:true, subtree:true });

    /* ======================
       Projektuj ‚Äî funkcjonalno≈õƒá
       ====================== */
    const graphicUpload = document.getElementById('graphicUpload');
    const mockup = document.getElementById('mockup');
    const mockupGraphic = document.getElementById('mockupGraphic');
    const mockupText = document.getElementById('mockupText');
    document.getElementById('previewBtn').addEventListener('click', ()=>{
      const color = document.getElementById('mockupColor').value;
      const text = document.getElementById('designText').value.trim();
      const product = document.getElementById('designProduct').value;
      mockup.style.background = color;
      if(text){
        mockupText.style.display = 'block';
        mockupText.textContent = text;
      } else {
        mockupText.style.display = 'none';
      }
      if(mockupGraphic.dataset.loaded==='true'){
        mockupGraphic.style.display = 'block';
      } else {
        mockupGraphic.style.display = 'none';
      }
      // preview summary
      const preview = document.getElementById('projectPreview');
      preview.innerHTML = `<strong>${product}</strong><div>Kolor: ${color}</div><div>Tekst: ${text||'-'}</div>`;
    });

    // load uploaded image into mockup
    graphicUpload.addEventListener('change', (ev)=>{
      const f = ev.target.files[0];
      if(!f) return;
      const reader = new FileReader();
      reader.onload = function(e){
        mockupGraphic.src = e.target.result;
        mockupGraphic.style.display = 'block';
        mockupGraphic.dataset.loaded = 'true';
        mockupGraphic.style.maxWidth = '60%';
        mockupGraphic.style.maxHeight = '60%';
      };
      reader.readAsDataURL(f);
    });

    // save project -> add to cart as "projekt w≈Çasny"
    document.getElementById('saveProjectBtn').addEventListener('click', ()=>{
      const product = document.getElementById('designProduct').value;
      const color = document.getElementById('mockupColor').value;
      const text = document.getElementById('designText').value.trim();
      const size = document.getElementById('designSize').value;
      let imageData = '';
      if(mockupGraphic.dataset.loaded==='true') imageData = mockupGraphic.src;
      const name = `Projekt: ${product} ${text?('- '+text):''}`;
      const price = (product==='Bluza')?150:(product==='Czapka')?79:99; // przyk≈Çadowe ceny
      const item = {
        id: 'proj_'+Date.now(),
        name,
        price,
        image: imageData,
        color,
        text,
        size,
        custom: true
      };
      addToCart(item);
      showBotMessage('Gotowe ‚Äî projekt dodany do koszyka üëç', true);
    });

    /* ======================
       Bot prosty + integracja wiedzy
       ====================== */
    const chatBody = document.getElementById('chatBody');
    const chatInput = document.getElementById('chatInput');
    const chatSend = document.getElementById('chatSend');

    function showBotMessage(text, brief){
      const d = document.createElement('div');
      d.className = 'bubble bot';
      d.textContent = text;
      chatBody.appendChild(d);
      chatBody.scrollTop = chatBody.scrollHeight;
      // optionally keep a short history in localStorage
      saveBotMemory({role:'bot',text,ts:Date.now()});
      if(brief) setTimeout(()=>{/* no op */},400);
    }
    function showUserMessage(text){
      const d = document.createElement('div');
      d.className = 'bubble me';
      d.textContent = text;
      chatBody.appendChild(d);
      chatBody.scrollTop = chatBody.scrollHeight;
      saveBotMemory({role:'user',text,ts:Date.now()});
    }

    // prosty "knowledge base" ‚Äî bot zna sekcje i modƒô
    const KNOWLEDGE = {
      sections: {
        blog: 'Sekcja Blog zawiera artyku≈Çy o trendach, poradach i inspiracjach.',
        projektuj: 'W sekcji Projektuj mo≈ºesz stworzyƒá w≈Çasny projekt koszulki, bluzy lub czapki i dodaƒá go do koszyka.',
        zbi√≥rka: 'Wspieramy Dom Dziecka "Promyk" ‚Äî czƒô≈õƒá wp≈Çyw√≥w idzie na pomoc.',
        regulamin: 'Regulamin sklepu i warunki realizacji zam√≥wie≈Ñ.',
        kontakt: 'Dane kontaktowe i formularz kontaktowy.'
      },
      fashion: [
        'Streetwear: wygoda + grafika + silne brandowe komunikaty.',
        'Vintage: powr√≥t klasycznych kroj√≥w i nadruk√≥w retro.',
        'TransformujƒÖce nadruki: modne, ekskluzywne projekty reagujƒÖce na pr√≥bƒô.'
      ]
    };

    // memory
    const BOT_MEM_KEY = 'adelbertus_bot_mem_v1';
    function getBotMemory(){ try{return JSON.parse(localStorage.getItem(BOT_MEM_KEY)||'[]')}catch(e){return[]} }
    function saveBotMemory(entry){ const m=getBotMemory(); m.push(entry); localStorage.setItem(BOT_MEM_KEY, JSON.stringify(m)); }

    function processUserQuery(q){
      q = q.toLowerCase().trim();
      if(q.includes('projekt') || q.includes('projektuj')) return KNOWLEDGE.sections.projektuj;
      if(q.includes('blog')) return KNOWLEDGE.sections.blog;
      if(q.includes('zbi√≥r') || q.includes('darcz') ) return KNOWLEDGE.sections.zbi√≥rka;
      if(q.includes('regulamin')) return KNOWLEDGE.sections.regulamin;
      if(q.includes('kontakt')) return KNOWLEDGE.sections.kontakt;
      if(q.includes('trendy')||q.includes('moda')) return 'Aktualne trendy: ' + KNOWLEDGE.fashion.join(' | ');
      if(q.includes('koszyk')) return 'Sprawd≈∫ sekcjƒô Koszyk ‚Äî projekty i produkty sƒÖ zapisywane lokalnie.';
      if(q.includes('cena')) return 'Ceny: koszulka 99 z≈Ç (projekt w≈Çasny), bluza 150 z≈Ç, czapka 79 z≈Ç ‚Äî mo≈ºesz je nadpisaƒá w konfiguracji.';
      // fallback
      return "Przykro mi ‚Äî nie rozumiem dok≈Çadnie. Mogƒô pom√≥c z: Blog, Projektuj, Zbi√≥rka, Regulamin, Kontakt, koszyk, trendy modowe.";
    }

    chatSend.addEventListener('click', ()=>{
      const q = chatInput.value.trim();
      if(!q) return;
      showUserMessage(q);
      const answer = processUserQuery(q);
      setTimeout(()=>showBotMessage(answer),300);
      chatInput.value = '';
    });

    chatInput.addEventListener('keydown',(e)=>{
      if(e.key==='Enter'){ chatSend.click(); e.preventDefault(); }
    });

    /* ======================
       Kontakt form
       ====================== */
    document.getElementById('contactForm').addEventListener('submit',(ev)=>{
      ev.preventDefault();
      alert('Wiadomo≈õƒá wys≈Çana (demo). Je≈õli chcesz, ustawmy wysy≈Çkƒô na Tw√≥j serwer.');
    });

    /* ======================
       Zbi√≥rka (przycisk)
       ====================== */
    document.getElementById('donateBtn').addEventListener('click', ()=>{
      const amt = prompt('Kwota darowizny w z≈Ç:', '50');
      if(!amt) return;
      const list = document.getElementById('donorsList');
      const li = document.createElement('li');
      li.textContent = `Anonim - ${amt} z≈Ç`;
      list.insertBefore(li, list.firstChild);
      showBotMessage(`Dziƒôki za wsparcie ${amt} z≈Ç!`);
    });

    /* ======================
       Inicjalizacja
       ====================== */
    renderCart();
    attachExistingAddButtons();

    // expose util to global (opcjonalnie)
    window.adelbertus = {
      addToCart,
      getCart,
      showBotMessage
    };

    // auto-focus chat small nicety
    //document.getElementById('chatInput').focus();
  </script>
</body>
</html>
