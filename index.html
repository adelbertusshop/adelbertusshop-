<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Markdown Editor â€” Basic</title>
<!-- Tailwind CDN for quick styling -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- Marked for Markdown rendering -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
  /* warm honey + soft gold feel */
  :root{
    --gold:#D4AF37;
    --honey:#FFE5B4;
    --text:#4B3832;
  }
  body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
  .toolbar-btn{transition:all .15s}
  .editor-area{font-family: "Fira Code", monospace; font-size:15px;}
  .status-dot{width:10px;height:10px;border-radius:999px;background:#10B981}
</style>
</head>
<body class="min-h-screen bg-gradient-to-br from-yellow-50 via-yellow-100 to-white text-[var(--text)]">
  <header class="max-w-6xl mx-auto p-4 flex justify-between items-center">
    <div class="flex items-center gap-4">
      <h1 class="text-2xl font-semibold">âœ¦ Markdown Editor â€” Basic</h1>
      <div class="text-sm text-gray-600">BezpÅ‚atna wersja, lokalne zapisy</div>
    </div>
    <div class="flex items-center gap-2">
      <div class="flex items-center gap-2 text-sm">
        <div class="status-dot"></div><span>Auto-saved</span>
      </div>
      <button id="downloadBtn" class="px-3 py-1 rounded bg-[var(--gold)] text-white">ðŸ’¾ Download .md</button>
    </div>
  </header>

  <div class="max-w-6xl mx-auto p-4">
    <div class="mb-3 flex gap-2 overflow-auto">
      <button class="toolbar-btn px-3 py-1 rounded bg-white border" data-insert="# ">H1 âœ¨</button>
      <button class="toolbar-btn px-3 py-1 rounded bg-white border" data-insert="## ">H2 ðŸŒŸ</button>
      <button class="toolbar-btn px-3 py-1 rounded bg-white border" data-wrap="**">B ðŸ–¤</button>
      <button class="toolbar-btn px-3 py-1 rounded bg-white border" data-wrap="*">I ðŸ’›</button>
      <button class="toolbar-btn px-3 py-1 rounded bg-white border" data-wrap="`">`code` ðŸ’»</button>
      <button class="toolbar-btn px-3 py-1 rounded bg-white border" data-insert="- ">â€¢ List ðŸ”¹</button>
      <button class="toolbar-btn px-3 py-1 rounded bg-white border" data-insert="![alt](">ðŸ–¼ Image</button>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
      <textarea id="editor" class="editor-area p-4 rounded shadow h-96 resize-none" placeholder="Start writing..."># Witaj, zaczynaj pisaÄ‡ âœ¨

To jest wersja Basic. MoÅ¼esz zapisaÄ‡ lokalnie i pobraÄ‡ plik Markdown.</textarea>

      <div id="preview" class="prose p-4 rounded shadow bg-white overflow-auto h-96"></div>
    </div>

    <div class="mt-4 text-sm text-gray-600 flex justify-between items-center">
      <div>Words: <span id="words">0</span> â€¢ Characters: <span id="chars">0</span></div>
      <div class="text-xs">Tip: uÅ¼yj przyciskÃ³w w pasku by wstawiaÄ‡ markdown</div>
    </div>
  </div>

<script>
  const editor = document.getElementById('editor');
  const preview = document.getElementById('preview');
  const words = document.getElementById('words');
  const chars = document.getElementById('chars');
  const downloadBtn = document.getElementById('downloadBtn');

  // Load from localStorage
  const STORAGE_KEY = 'md_basic_content_v1';
  const saved = localStorage.getItem(STORAGE_KEY);
  if(saved) editor.value = saved;

  function render(){
    const md = editor.value;
    preview.innerHTML = marked.parse(md);
    words.textContent = md.trim().split(/\s+/).filter(Boolean).length;
    chars.textContent = md.length;
  }

  // initial
  render();

  // autosave debounced
  let timer;
  editor.addEventListener('input', () => {
    render();
    clearTimeout(timer);
    timer = setTimeout(()=> {
      localStorage.setItem(STORAGE_KEY, editor.value);
    }, 800);
  });

  // toolbar buttons
  document.querySelectorAll('.toolbar-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const insert = btn.dataset.insert;
      const wrap = btn.dataset.wrap;
      const start = editor.selectionStart;
      const end = editor.selectionEnd;
      const sel = editor.value.substring(start,end);
      if(wrap){
        editor.setRangeText(wrap+sel+wrap,start,end,'end');
      } else if(insert){
        editor.setRangeText(insert,start,end,'end');
      }
      editor.focus();
      render();
    });
  });

  // download markdown
  downloadBtn.addEventListener('click', ()=>{
    const blob = new Blob([editor.value],{type:'text/markdown'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = `post-${Date.now()}.md`;
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
  });
</script>
</body>
</html>
